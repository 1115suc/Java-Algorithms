# å‰ç¼€å’Œï¼ˆPrefix Sumï¼‰ğŸ§®

## 1. è¾“å…¥æ•°ç»„ ğŸ“¥
- è¯»å–æ•°ç»„é•¿åº¦ [n] å’ŒæŸ¥è¯¢æ¬¡æ•° `m`ã€‚
- ä»æ ‡å‡†è¾“å…¥è¯»å–æ•°ç»„ [a] çš„å…ƒç´ ã€‚

## 2. æ„å»ºå‰ç¼€å’Œæ•°ç»„ ğŸ—ï¸
- åˆ›å»ºä¸€ä¸ªä¸åŸæ•°ç»„ [a] ç­‰é•¿çš„å‰ç¼€å’Œæ•°ç»„ [s]ã€‚
- ä½¿ç”¨é€’æ¨å…¬å¼ `s[i] = s[i - 1] + a[i]` æ¥è®¡ç®—å‰ç¼€å’Œã€‚

## 3. å¤„ç†æŸ¥è¯¢ ğŸ”
- å¯¹äºæ¯æ¬¡æŸ¥è¯¢ï¼Œè¯»å–å·¦å³è¾¹ç•Œ [l] å’Œ `r`ã€‚
- åˆ©ç”¨å‰ç¼€å’Œæ•°ç»„å¿«é€Ÿè®¡ç®—åŒºé—´å’Œ `s[r] - s[l - 1]` å¹¶è¾“å‡ºã€‚

## 4. æ—¶é—´å¤æ‚åº¦åˆ†æ â±ï¸
- é¢„å¤„ç†æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚
- æ¯æ¬¡æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(1)`ã€‚
- æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º `O(n + m)`ï¼Œé€‚ç”¨äºé¢‘ç¹æŸ¥è¯¢åœºæ™¯ã€‚

## 5. å‰ç¼€å’Œä»£ç å®ç°(Java) ğŸ’»
```java
import java.util.Scanner;

public class PrefixSum {
    static final int N = 100010;
    static int n, m;
    static int[] a = new int[N];
    static int[] s = new int[N];

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        n = in.nextInt();
        m = in.nextInt();

        for (int i = 1; i <= n; i++) a[i] = in.nextInt();
        for (int i = 1; i <= n; i++) s[i] = s[i - 1] + a[i];

        while (m-- > 0) {
            int l = in.nextInt(), r = in.nextInt();
            System.out.println(s[r] - s[l - 1]);
        }
    }
}
```
## 6. åº”ç”¨åœºæ™¯ ğŸ¯
- å¿«é€Ÿæ±‚è§£**é™æ€æ•°ç»„**çš„åŒºé—´å’Œé—®é¢˜ã€‚
- åœ¨æ•°æ®é‡å¤§ã€æŸ¥è¯¢é¢‘ç¹çš„æƒ…å†µä¸‹æ•ˆç‡æ˜¾è‘—æå‡ã€‚

---

# å·®åˆ†ï¼ˆDifference Arrayï¼‰ğŸ§©
## 1. åˆå§‹åŒ–å·®åˆ†æ•°ç»„ ğŸ“Œ
- åŸæ•°ç»„ä¸º [a]ï¼Œåˆ›å»ºä¸€ä¸ªé•¿åº¦ç›¸åŒçš„å·®åˆ†æ•°ç»„ [d]ã€‚
- å·®åˆ†æ•°ç»„å®šä¹‰ï¼š`d[0] = a[0]`ï¼Œ`d[i] = a[i] - a[i - 1]`ï¼ˆi > 0ï¼‰ã€‚
## 2. åˆ©ç”¨å·®åˆ†å®ç°åŒºé—´æ›´æ–° âœ¨
- è‹¥è¦å¯¹åŸæ•°ç»„çš„åŒºé—´ `[l, r]` çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šä¸€ä¸ªå€¼ `k`ï¼Œåªéœ€ï¼š
    - `d[l] += k`
    - `d[r + 1] -= k`ï¼ˆè‹¥ `r + 1 < n`ï¼‰
## 3. æ¢å¤åŸæ•°ç»„ ğŸ”
- æ ¹æ®å·®åˆ†æ•°ç»„æ¢å¤åŸæ•°ç»„ï¼š
  ```java
  a[0] = d[0];
  for (int i = 1; i < n; i++) {
      a[i] = a[i - 1] + d[i];
  }
  ```
## 4. æ—¶é—´å¤æ‚åº¦åˆ†æ â±ï¸
- æ„å»ºå·®åˆ†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚
- æ¯æ¬¡åŒºé—´æ›´æ–°æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º `O(1)`ã€‚
- æ¢å¤åŸæ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚
- æ€»ä½“æ•ˆç‡é«˜ï¼Œé€‚ç”¨äºé¢‘ç¹è¿›è¡ŒåŒºé—´æ›´æ–°çš„åœºæ™¯ã€‚
## 5. å·®åˆ†ç®—æ³•ä»£ç å®ç°(Java) ğŸ’»
```java
import java.util.Scanner;

public class DifferenceArray {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        int n = in.nextInt();
        int[] a = new int[n];
        
        // è¾“å…¥åŸæ•°ç»„
        for (int i = 0; i < n; i++) {
            a[i] = in.nextInt();
        }

        // æ„å»ºå·®åˆ†æ•°ç»„
        int[] d = new int[n];
        d[0] = a[0];
        for (int i = 1; i < n; i++) {
            d[i] = a[i] - a[i - 1];
        }

        // è¿›è¡ŒåŒºé—´æ›´æ–°æ“ä½œç¤ºä¾‹ï¼šç»™ [1, 3] åŒºé—´å†…æ¯ä¸ªæ•°åŠ  3
        int l = 1, r = 3, k = 3;
        d[l] += k;
        if (r + 1 < n) {
            d[r + 1] -= k;
        }

        // æ¢å¤æ›´æ–°åçš„åŸæ•°ç»„
        int[] updatedA = new int[n];
        updatedA[0] = d[0];
        for (int i = 1; i < n; i++) {
            updatedA[i] = updatedA[i - 1] + d[i];
        }

        // è¾“å‡ºæ›´æ–°åçš„æ•°ç»„
        for (int num : updatedA) {
            System.out.print(num + " ");
        }
    }
}
```
## 6. åº”ç”¨åœºæ™¯ ğŸ¯
- é«˜é¢‘è¿›è¡Œ**åŒºé—´æ›´æ–°**æ“ä½œçš„é—®é¢˜ã€‚
- åœ¨éœ€è¦é¢‘ç¹æŸ¥è¯¢å•ç‚¹å€¼æ—¶éå¸¸é«˜æ•ˆã€‚
- å¯ä»¥æ‰©å±•åˆ°äºŒç»´çŸ©é˜µçš„å·®åˆ†é—®é¢˜ä¸­ä½¿ç”¨ã€‚

# äºŒç»´å·®åˆ†ï¼ˆ2D Difference Arrayï¼‰ğŸ§©

## 1. åˆå§‹åŒ–äºŒç»´å·®åˆ†æ•°ç»„ ğŸ“Œ
- åŸäºŒç»´æ•°ç»„ä¸º `matrix`ï¼Œå¤§å°ä¸º `n x m`ã€‚
- åˆ›å»ºä¸€ä¸ªåŒæ ·å¤§å°çš„å·®åˆ†æ•°ç»„ `diff`ï¼Œåˆå§‹åŒ–ä¸ºå…¨0ã€‚
- åˆ©ç”¨å…¬å¼æ„å»ºå·®åˆ†æ•°ç»„ï¼š
  ```java
  diff[i][j] = matrix[i][j];
  if (i > 0) diff[i][j] -= matrix[i - 1][j];
  if (j > 0) diff[i][j] -= matrix[i][j - 1];
  if (i > 0 && j > 0) diff[i][j] += matrix[i - 1][j - 1];
  ```


## 2. åˆ©ç”¨å·®åˆ†å®ç°çŸ©å½¢åŒºåŸŸæ›´æ–° âœ¨
- å¯¹äºä¸€ä¸ªçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’ `(r1, c1)` åˆ°å³ä¸‹è§’ `(r2, c2)` çš„æ‰€æœ‰å…ƒç´ å¢åŠ æŸä¸ªå€¼ `k`ï¼Œåªéœ€ä»¥ä¸‹4æ­¥æ“ä½œï¼š
    - `diff[r1][c1] += k`
    - `diff[r1][c2 + 1] -= k`ï¼ˆå¦‚æœ `c2 + 1 < m`ï¼‰
    - `diff[r2 + 1][c1] -= k`ï¼ˆå¦‚æœ `r2 + 1 < n`ï¼‰
    - `diff[r2 + 1][c2 + 1] += k`ï¼ˆå¦‚æœ `r2 + 1 < n && c2 + 1 < m`ï¼‰

## 3. æ¢å¤åŸäºŒç»´æ•°ç»„ ğŸ”
- æ ¹æ®å·®åˆ†æ•°ç»„æ¢å¤åŸæ•°ç»„ï¼š
  ```java
  matrix[i][j] = diff[i][j];
  if (i > 0) matrix[i][j] += matrix[i - 1][j];
  if (j > 0) matrix[i][j] += matrix[i][j - 1];
  if (i > 0 && j > 0) matrix[i][j] -= matrix[i - 1][j - 1];
  ```


## 4. æ—¶é—´å¤æ‚åº¦åˆ†æ â±ï¸
- æ„å»ºå·®åˆ†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n * m)`ã€‚
- æ¯æ¬¡çŸ©å½¢åŒºåŸŸæ›´æ–°æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º `O(1)`ã€‚
- æ¢å¤åŸæ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n * m)`ã€‚
- æ€»ä½“æ•ˆç‡é«˜ï¼Œé€‚ç”¨äºé¢‘ç¹è¿›è¡ŒçŸ©å½¢åŒºåŸŸæ›´æ–°çš„åœºæ™¯ã€‚

## 5. äºŒç»´å·®åˆ†ä»£ç å®ç°(Java) ğŸ’»
```java
import java.util.Scanner;

public class TwoDDifference {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        int n = in.nextInt();
        int m = in.nextInt();
        int[][] matrix = new int[n][m];

        // è¾“å…¥åŸå§‹äºŒç»´æ•°ç»„
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++) {
                matrix[i][j] = in.nextInt();
            }
        }

        // æ„å»ºäºŒç»´å·®åˆ†æ•°ç»„
        int[][] diff = new int[n][m];
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++) {
                diff[i][j] = matrix[i][j];
                if (i > 0) diff[i][j] -= matrix[i - 1][j];
                if (j > 0) diff[i][j] -= matrix[i][j - 1];
                if (i > 0 && j > 0) diff[i][j] += matrix[i - 1][j - 1];
            }
        }

        // è¿›è¡ŒçŸ©å½¢åŒºåŸŸæ›´æ–°æ“ä½œç¤ºä¾‹ï¼šç»™ [r1,c1] åˆ° [r2,c2] åŒºåŸŸå†…æ¯ä¸ªæ•°åŠ  3
        int r1 = 0, c1 = 0, r2 = 1, c2 = 1, k = 3;
        diff[r1][c1] += k;
        if (c2 + 1 < m) diff[r1][c2 + 1] -= k;
        if (r2 + 1 < n) diff[r2 + 1][c1] -= k;
        if (r2 + 1 < n && c2 + 1 < m) diff[r2 + 1][c2 + 1] += k;

        // æ¢å¤æ›´æ–°åçš„äºŒç»´æ•°ç»„
        int[][] updatedMatrix = new int[n][m];
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++) {
                updatedMatrix[i][j] = diff[i][j];
                if (i > 0) updatedMatrix[i][j] += updatedMatrix[i - 1][j];
                if (j > 0) updatedMatrix[i][j] += updatedMatrix[i][j - 1];
                if (i > 0 && j > 0) updatedMatrix[i][j] -= updatedMatrix[i - 1][j - 1];
            }
        }

        // è¾“å‡ºæ›´æ–°åçš„äºŒç»´æ•°ç»„
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++) {
                System.out.print(updatedMatrix[i][j] + " ");
            }
            System.out.println();
        }
    }
}
```

## 6. åº”ç”¨åœºæ™¯ ğŸ¯
- é«˜é¢‘è¿›è¡Œ**çŸ©å½¢åŒºåŸŸæ›´æ–°**çš„é—®é¢˜ã€‚
- åœ¨éœ€è¦é¢‘ç¹æŸ¥è¯¢äºŒç»´æ•°ç»„ä¸­çš„å•ç‚¹å€¼æ—¶éå¸¸é«˜æ•ˆã€‚
- å¯ä»¥ç”¨äºå›¾åƒå¤„ç†ã€åœ°å›¾æ•°æ®è®¡ç®—ç­‰å®é™…åº”ç”¨åœºæ™¯ã€‚
