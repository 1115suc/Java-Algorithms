# ğŸ”€ å¤šè·¯é€’å½’

## ğŸ° æ–æ³¢é‚£å¥‘æ•°åˆ—

ä¹‹å‰çš„ä¾‹å­æ˜¯æ¯ä¸ªé€’å½’å‡½æ•°åªåŒ…å«ä¸€ä¸ªè‡ªèº«çš„è°ƒç”¨ï¼Œè¿™ç§°ä¹‹ä¸º single recursionã€‚

å¦‚æœæ¯ä¸ªé€’å½’å‡½æ•°ä¾‹åŒ…å«å¤šä¸ªè‡ªèº«è°ƒç”¨ï¼Œç§°ä¹‹ä¸º multi recursionã€‚

### ğŸ“ é€’æ¨å…³ç³»

$$
f(n) =
\begin{cases}
0 & n=0 \\
1 & n=1 \\
f(n-1) + f(n-2) & n>1
\end{cases}
$$

ä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºäº†æ•°åˆ—çš„å‰å‡ é¡¹

| *F*0 | *F*1 | *F*2 | *F*3 | *F*4 | *F*5 | *F*6 | *F*7 | *F*8 | *F*9 | *F*10 | *F*11 | *F*12 | *F*13 |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ----- | ----- | ----- | ----- |
| 0    | 1    | 1    | 2    | 3    | 5    | 8    | 13   | 21   | 34   | 55    | 89    | 144   | 233   |

### ğŸ’» å®ç°

```java
public static int f(int n) {
    if (n == 0) {
        return 0;
    }
    if (n == 1) {
        return 1;
    }
    return f(n - 1) + f(n - 2);
}
```


### â–¶ï¸ æ‰§è¡Œæµç¨‹

![](imgs/2.gif)

* ç»¿è‰²ä»£è¡¨æ­£åœ¨æ‰§è¡Œï¼ˆå¯¹åº”é€’ï¼‰ï¼Œç°è‰²ä»£è¡¨æ‰§è¡Œç»“æŸï¼ˆå¯¹åº”å½’ï¼‰
* é€’ä¸åˆ°å¤´ï¼Œä¸èƒ½å½’ï¼Œå¯¹åº”ç€æ·±åº¦ä¼˜å…ˆæœç´¢

### â±ï¸ æ—¶é—´å¤æ‚åº¦

* é€’å½’çš„æ¬¡æ•°ä¹Ÿç¬¦åˆæ–æ³¢é‚£å¥‘è§„å¾‹ï¼Œ$2 * f(n+1)-1$
* æ—¶é—´å¤æ‚åº¦æ¨å¯¼è¿‡ç¨‹
    * æ–æ³¢é‚£å¥‘é€šé¡¹å…¬å¼ $f(n) = \frac{1}{\sqrt{5}}*({\frac{1+\sqrt{5}}{2}}^n - {\frac{1-\sqrt{5}}{2}}^n)$
    * ç®€åŒ–ä¸ºï¼š$f(n) = \frac{1}{2.236}*({1.618}^n - {(-0.618)}^n)$
    * å¸¦å…¥é€’å½’æ¬¡æ•°å…¬å¼ $2*\frac{1}{2.236}*({1.618}^{n+1} - {(-0.618)}^{n+1})-1$
    * æ—¶é—´å¤æ‚åº¦ä¸º $\Theta(1.618^n)$

---

## ğŸ—¼ æ±‰è¯ºå¡”

Tower of Hanoiï¼Œæ˜¯ä¸€ä¸ªæºäºå°åº¦å¤è€ä¼ è¯´ï¼šå¤§æ¢µå¤©åˆ›å»ºä¸–ç•Œæ—¶åšäº†ä¸‰æ ¹é‡‘åˆšçŸ³æŸ±ï¼Œåœ¨ä¸€æ ¹æŸ±å­ä»ä¸‹å¾€ä¸ŠæŒ‰å¤§å°é¡ºåºæ‘ç€ 64 ç‰‡é»„é‡‘åœ†ç›˜ï¼Œå¤§æ¢µå¤©å‘½ä»¤å©†ç½—é—¨æŠŠåœ†ç›˜é‡æ–°æ‘†æ”¾åœ¨å¦ä¸€æ ¹æŸ±å­ä¸Šï¼Œå¹¶ä¸”è§„å®š

* ä¸€æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜
* å°åœ†ç›˜ä¸Šä¸èƒ½æ”¾å¤§åœ†ç›˜

ä¸‹é¢çš„åŠ¨å›¾æ¼”ç¤ºäº†4ç‰‡åœ†ç›˜çš„ç§»åŠ¨æ–¹æ³•

![](imgs/Tower_of_Hanoi_4.gif)

ä½¿ç”¨ç¨‹åºä»£ç æ¨¡æ‹Ÿåœ†ç›˜çš„ç§»åŠ¨è¿‡ç¨‹ï¼Œå¹¶ä¼°ç®—å‡ºæ—¶é—´å¤æ‚åº¦

### ğŸ’¡ æ€è·¯

* å‡è®¾æ¯æ ¹æŸ±å­æ ‡å· aï¼Œbï¼Œcï¼Œæ¯ä¸ªåœ†ç›˜ç”¨ 1ï¼Œ2ï¼Œ3 ... è¡¨ç¤ºå…¶å¤§å°ï¼Œåœ†ç›˜åˆå§‹åœ¨ aï¼Œè¦ç§»åŠ¨åˆ°çš„ç›®æ ‡æ˜¯ c

* å¦‚æœåªæœ‰ä¸€ä¸ªåœ†ç›˜ï¼Œæ­¤æ—¶æ˜¯æœ€å°é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥æ±‚è§£
    * ç§»åŠ¨åœ†ç›˜1 $a \mapsto c$

  <img src="imgs/image-20221219090741078.png" alt="image-20221219090741078" style="zoom:50%;" />

* å¦‚æœæœ‰ä¸¤ä¸ªåœ†ç›˜ï¼Œé‚£ä¹ˆ
    * åœ†ç›˜1 $a \mapsto b$
    * åœ†ç›˜2 $a \mapsto c$
    * åœ†ç›˜1 $b \mapsto c$

  <img src="imgs/image-20221219091316225.png" alt="image-20221219091316225" style="zoom:50%;" />

* å¦‚æœæœ‰ä¸‰ä¸ªåœ†ç›˜ï¼Œé‚£ä¹ˆ
    * åœ†ç›˜12 $a \mapsto b$
    * åœ†ç›˜3 $a \mapsto c$
    * åœ†ç›˜12 $b \mapsto c$

  <img src="imgs/image-20221219091930614.png" alt="image-20221219091930614" style="zoom:50%;" />

* å¦‚æœæœ‰å››ä¸ªåœ†ç›˜ï¼Œé‚£ä¹ˆ
    * åœ†ç›˜ 123 $a \mapsto b$
    * åœ†ç›˜4 $a \mapsto c$
    * åœ†ç›˜ 123 $b \mapsto c$

    <img src="imgs/image-20221219092537323.png" alt="image-20221219092537323" style="zoom:50%;" />

### âœ… é¢˜è§£

```java
public class E02HanoiTower {
    /*
             æº å€Ÿ ç›®
        h(4, a, b, c) -> h(3, a, c, b)
                         a -> c
                         h(3, b, a, c)
     */
    static LinkedList<Integer> a = new LinkedList<>();
    static LinkedList<Integer> b = new LinkedList<>();
    static LinkedList<Integer> c = new LinkedList<>();

    static void init(int n) {
        for (int i = n; i >= 1; i--) {
            a.add(i);
        }
    }

    static void h(int n, LinkedList<Integer> a, 
                  LinkedList<Integer> b, 
                  LinkedList<Integer> c) {
        if (n == 0) {
            return;
        }
        h(n - 1, a, c, b);
        c.addLast(a.removeLast());
        print();
        h(n - 1, b, a, c);
    }

    private static void print() {
        System.out.println("-----------------------");
        System.out.println(a);
        System.out.println(b);
        System.out.println(c);
    }

    public static void main(String[] args) {
        init(3);
        print();
        h(3, a, b, c);
    }
}
```


---

## ğŸ”º æ¨è¾‰ä¸‰è§’

![image-20221219172514410](imgs/image-20221219172514410.png)

### ğŸ“Š åˆ†æ

æŠŠå®ƒæ–œç€çœ‹

```
        1
      1   1
    1   2   1
  1   3   3   1
1   4   6   4   1
```


* è¡Œ $i$ï¼Œåˆ— $j$ï¼Œé‚£ä¹ˆ $[i][j]$ çš„å–å€¼åº”ä¸º $[i-1][j-1] + [i-1][j]$
* å½“ $j=0$ æˆ– $i=j$ æ—¶ï¼Œ$[i][j]$ å–å€¼ä¸º $1$

### âœ… é¢˜è§£

```java
public static void print(int n) {
    for (int i = 0; i < n; i++) {
        if (i < n - 1) {
            System.out.printf("%" + 2 * (n - 1 - i) + "s", " ");
        }

        for (int j = 0; j < i + 1; j++) {
            System.out.printf("%-4d", element(i, j));
        }
        System.out.println();
    }
}

public static int element(int i, int j) {
    if (j == 0 || i == j) {
        return 1;
    }
    return element(i - 1, j - 1) + element(i - 1, j);
}
```


### ğŸ”§ ä¼˜åŒ–1

æ˜¯ multiple recursionï¼Œå› æ­¤å¾ˆå¤šé€’å½’è°ƒç”¨æ˜¯é‡å¤çš„ï¼Œä¾‹å¦‚

* recursion(3, 1) åˆ†è§£ä¸º
    * recursion(2, 0) + recursion(2, 1)
* è€Œ recursion(3, 2) åˆ†è§£ä¸º
    * recursion(2, 1) + recursion(2, 2)

è¿™é‡Œ recursion(2, 1) å°±é‡å¤è°ƒç”¨äº†ï¼Œäº‹å®ä¸Šå®ƒä¼šé‡å¤å¾ˆå¤šæ¬¡ï¼Œå¯ä»¥ç”¨ static AtomicInteger counter = new AtomicInteger(0) æ¥æŸ¥çœ‹é€’å½’å‡½æ•°çš„è°ƒç”¨æ€»æ¬¡æ•°

äº‹å®ä¸Šï¼Œå¯ä»¥ç”¨ **memoization** æ¥è¿›è¡Œä¼˜åŒ–ï¼š

```java
public static void print1(int n) {
    int[][] triangle = new int[n][];
    for (int i = 0; i < n; i++) {
        // æ‰“å°ç©ºæ ¼
        triangle[i] = new int[i + 1];
        for (int j = 0; j <= i; j++) {
            System.out.printf("%-4d", element1(triangle, i, j));
        }
        System.out.println();
    }
}

public static int element1(int[][] triangle, int i, int j) {
    if (triangle[i][j] > 0) {
        return triangle[i][j];
    }

    if (j == 0 || i == j) {
        triangle[i][j] = 1;
        return triangle[i][j];
    }
    triangle[i][j] = element1(triangle, i - 1, j - 1) + element1(triangle, i - 1, j);
    return triangle[i][j];
}
```


* å°†æ•°ç»„ä½œä¸ºé€’å½’å‡½æ•°å†…å¯ä»¥è®¿é—®çš„éå†ï¼Œå¦‚æœ $triangle[i][j]$ å·²ç»æœ‰å€¼ï¼Œè¯´æ˜è¯¥å…ƒç´ å·²ç»è¢«ä¹‹å‰çš„é€’å½’å‡½æ•°è®¡ç®—è¿‡ï¼Œå°±ä¸å¿…é‡å¤è®¡ç®—äº†

### ğŸ”§ ä¼˜åŒ–2

```java
public static void print2(int n) {
    int[] row = new int[n];
    for (int i = 0; i < n; i++) {
        // æ‰“å°ç©ºæ ¼
        createRow(row, i);
        for (int j = 0; j <= i; j++) {
            System.out.printf("%-4d", row[j]);
        }
        System.out.println();
    }
}

private static void createRow(int[] row, int i) {
    if (i == 0) {
        row[0] = 1;
        return;
    }
    for (int j = i; j > 0; j--) {
        row[j] = row[j - 1] + row[j];
    }
}
```
