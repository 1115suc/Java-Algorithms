# ğŸ” äºŒåˆ†æŸ¥æ‰¾ç®—æ³•è¯¦è§£

äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ä¹Ÿç§°æŠ˜åŠæŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„å·¥ä½œäºæœ‰åºæ•°ç»„çš„æŸ¥æ‰¾ç®—æ³•ã€‚âœ¨

---

## ğŸ¯ åŸºç¡€ç‰ˆæœ¬

### éœ€æ±‚è¯´æ˜

åœ¨**æœ‰åº**æ•°ç»„ `A` å†…ï¼ŒæŸ¥æ‰¾å€¼ `target`
- âœ… å¦‚æœæ‰¾åˆ°è¿”å›ç´¢å¼•
- âŒ å¦‚æœæ‰¾ä¸åˆ°è¿”å› `-1`

### ç®—æ³•æ­¥éª¤

| å‰æ | ç»™å®šä¸€ä¸ªå†…å« $n$ ä¸ªå…ƒç´ çš„æœ‰åºæ•°ç»„ $A$ï¼Œæ»¡è¶³ $A_0 \leq A_1 \leq A_2 \leq \cdots \leq A_{n-1}$ï¼Œä¸€ä¸ªå¾…æŸ¥å€¼ `target` |
|------|----------------------------------------------------------------------------------------------------------------|
| 1    | è®¾ç½® $i=0$ï¼Œ$j=n-1$                                                                                         |
| 2    | å¦‚æœ $i > j$ï¼Œç»“æŸæŸ¥æ‰¾ï¼Œæ²¡æ‰¾åˆ°                                                                                |
| 3    | è®¾ç½® $m = \text{floor}(\frac{i+j}{2})$ ï¼Œ$m$ ä¸ºä¸­é—´ç´¢å¼•ï¼Œ$\text{floor}$ æ˜¯å‘ä¸‹å–æ•´ï¼ˆ$\leq \frac{i+j}{2}$ çš„æœ€å°æ•´æ•°ï¼‰ |
| 4    | å¦‚æœ $\text{target} < A_m$ è®¾ç½® $j = m - 1$ï¼Œè·³åˆ°ç¬¬2æ­¥                                                       |
| 5    | å¦‚æœ $A_m < \text{target}$ è®¾ç½® $i = m + 1$ï¼Œè·³åˆ°ç¬¬2æ­¥                                                       |
| 6    | å¦‚æœ $A_m = \text{target}$ï¼Œç»“æŸæŸ¥æ‰¾ï¼Œæ‰¾åˆ°äº†                                                                  |

### Java å®ç°

```java
public static int binarySearch(int[] a, int target) {
    int i = 0, j = a.length - 1;
    while (i <= j) {
        int m = (i + j) >>> 1;
        if (target < a[m]) {			// åœ¨å·¦è¾¹
            j = m - 1;
        } else if (a[m] < target) {		// åœ¨å³è¾¹
            i = m + 1;
        } else {
            return m;
        }
    }
    return -1;
}
```


#### ğŸ’¡ å…³é”®è¦ç‚¹è§£æï¼š

- `i,j` å¯¹åº”ç€æœç´¢åŒºé—´ `[0,a.length-1]`ï¼ˆæ³¨æ„æ˜¯é—­åˆçš„åŒºé—´ï¼‰
- `i<=j` æ„å‘³ç€æœç´¢åŒºé—´å†…è¿˜æœ‰æœªæ¯”è¾ƒçš„å…ƒç´ ï¼Œ`i,j` æŒ‡å‘çš„å…ƒç´ ä¹Ÿå¯èƒ½æ˜¯æ¯”è¾ƒçš„ç›®æ ‡
  - ğŸ¤” **æ€è€ƒ**ï¼šå¦‚æœä¸åŠ  `i==j` è¡Œä¸è¡Œï¼Ÿ
  - ğŸ’¬ **å›ç­”**ï¼šä¸è¡Œï¼Œå› ä¸ºè¿™æ„å‘³ç€ `i,j` æŒ‡å‘çš„å…ƒç´ ä¼šæ¼è¿‡æ¯”è¾ƒ
- `m` å¯¹åº”ç€ä¸­é—´ä½ç½®ï¼Œä¸­é—´ä½ç½®å·¦è¾¹å’Œå³è¾¹çš„å…ƒç´ å¯èƒ½ä¸ç›¸ç­‰ï¼ˆå·®ä¸€ä¸ªï¼‰ï¼Œä¸ä¼šå½±å“ç»“æœ
- å¦‚æœæŸæ¬¡æœªæ‰¾åˆ°ï¼Œé‚£ä¹ˆç¼©å°åçš„åŒºé—´å†…ä¸åŒ…å« `m`

---

## âš™ï¸ æ”¹è¿›ç‰ˆæœ¬

```java
public static int binarySearch(int[] a, int target) {
    int i = 0, j = a.length - 1;
    while (i < j) {
        int m = 1 + (i + j) >>> 1;
        if (target < a[m]) {			// åœ¨å·¦è¾¹
            j = m;
        } else if (a[m] < target) {		// åœ¨å³è¾¹
            i = m + 1;
        } else {
            return m;
        }
    }
    return -1;
}
```


#### ğŸ’¡ å…³é”®è¦ç‚¹è§£æï¼š

- `i,j` å¯¹åº”ç€æœç´¢åŒºé—´ `[0,a.length)`ï¼ˆæ³¨æ„æ˜¯å·¦é—­å³å¼€çš„åŒºé—´ï¼‰
- `i<j` æ„å‘³ç€æœç´¢åŒºé—´å†…è¿˜æœ‰æœªæ¯”è¾ƒçš„å…ƒç´ ï¼Œ`j` æŒ‡å‘çš„**ä¸€å®šä¸æ˜¯**æŸ¥æ‰¾ç›®æ ‡
  - ğŸ¤” **æ€è€ƒ**ï¼šä¸ºå•¥è¿™æ¬¡ä¸åŠ  `i==j` çš„æ¡ä»¶äº†ï¼Ÿ
  - ğŸ’¬ **å›ç­”**ï¼šè¿™å› `j` æŒ‡å‘çš„ä¸æ˜¯æŸ¥æ‰¾ç›®æ ‡ï¼Œå¦‚æœè¿˜åŠ  `i==j` æ¡ä»¶ï¼Œå°±æ„å‘³ç€ `j` æŒ‡å‘çš„è¿˜ä¼šå†æ¬¡æ¯”è¾ƒï¼Œæ‰¾ä¸åˆ°æ—¶ï¼Œä¼šæ­»å¾ªç¯
- å¦‚æœæŸæ¬¡è¦ç¼©å°å³è¾¹ç•Œï¼Œé‚£ä¹ˆ `j=m`ï¼Œå› ä¸ºæ­¤æ—¶çš„ `m` å·²ç»**ä¸æ˜¯**æŸ¥æ‰¾ç›®æ ‡äº†

---

## ğŸ”š Leftmost ä¸ Rightmost æŸ¥æ‰¾

æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾é‡å¤å…ƒç´ ä¸­æœ€å·¦è¾¹æˆ–æœ€å³è¾¹çš„é‚£ä¸ªå…ƒç´ ã€‚

### ç¤ºä¾‹è¯´æ˜ï¼š

- å¯¹äºæ•°ç»„ `[1, 2, 3, 4, 4, 5, 6, 7]`ï¼ŒæŸ¥æ‰¾å…ƒç´ 4ï¼Œç»“æœæ˜¯ç´¢å¼•3
- å¯¹äºæ•°ç»„ `[1, 2, 4, 4, 4, 5, 6, 7]`ï¼ŒæŸ¥æ‰¾å…ƒç´ 4ï¼Œç»“æœä¹Ÿæ˜¯ç´¢å¼•3ï¼Œå¹¶ä¸æ˜¯æœ€å·¦ä¾§çš„å…ƒç´ 

### æŸ¥æ‰¾æœ€å·¦ä¾§å…ƒç´ å®ç°ï¼š

```java
public static int binarySearchLeftmost1(int[] a, int target) {
    int i = 0, j = a.length - 1;
    while (i < j) {
        int m = (i + j) >>> 1;
        if (target <= a[m]) {
            j = m;
        } else {
            i = m + 1;
        } 
    }
    
    if (a[i] == target) return i;
    else return -1;
}
```


### æŸ¥æ‰¾æœ€å³ä¾§å…ƒç´ å®ç°ï¼š

```java
public static int binarySearchRightmost1(int[] a, int target) {
    int i = 0, j = a.length - 1;
    while (i < j) {
        int m = 1 + (i + j) >>> 1;
        if (target >= a[m]) {
            i = m;
        } else {
            j = m - 1;
        }
    }
    
    if (a[j] == target) return j;
    else return -1;
}
```


è¿™äº›å˜ä½“å¯¹äºå¤„ç†å­˜åœ¨é‡å¤å…ƒç´ çš„æƒ…å†µéå¸¸æœ‰ç”¨ï¼ğŸ‘